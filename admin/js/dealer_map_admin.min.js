jQuery(document).ready(function(r){var a;function t(){r("#dealer_map-map").addClass("bigi"),function(e,t){var a=r("#address").val(),n=r("#city").val(),l=r("#state").val(),o=r("#zip").val(),i=a+", "+n+", "+l+", "+o;{if(!(20<=i.length))return;e.geocode({address:i},function(e,a){if("OK"===a){t.setCenter(e[0].geometry.location),function(e,a){var t=e.formatted_address.split(","),n=a.replace(/, /g," ").trim(),l=t.slice(0,t.length-1).toString().replace(/, /g," ").trim(),o=n.replace(l," ");""===r("#name").val()&&r("#name").val(o);r("#latitude").val(e.geometry.location.lat().toFixed(6)),r("#longitude").val(e.geometry.location.lng().toFixed(6)),r("#active").val("1"),4===t.length?(r("#address").val(t[0].trim()),r("#city").val(t[1].trim()),r("#state").val(t[2].trim().split(" ",1)),r("#zip").val(t[2].trim().slice(3,8)),r("#country").val(t[3].trim())):function(e){var a=e.address_components;6<a.length?(r("#address").val(a[0].long_name+" "+a[1].long_name+" "+a[2].long_name),r("#city").val(a[3].long_name),r("#state").val(a[4].long_name),r("#zip").val(a[6].long_name),r("#country").val(a[5].short_name)):(r("#address").val(a[0].long_name+" "+a[1].long_name),r("#city").val(a[2].long_name),"US"===a[4].short_name?r("#state").val(a[3].short_name):r("#state").val(a[3].long_name),r("#zip").val(a[5].long_name),r("#country").val(a[4].short_name))}(e)}(e[0],i);new google.maps.Marker({map:t,position:e[0].geometry.location})}else alert(dealer_map_admin_vars.geo_alert+": "+a)})}}(new google.maps.Geocoder,new google.maps.Map(document.getElementById("dealer_map-map"),{zoom:8,center:{lat:32.480285,lng:-95.703372}}))}r(function(){var e=r("#general").tabs({activate:function(e,a){var t=r("#general").tabs("option","active");r.cookie("activeTabIndex",t)}}),a=r.cookie("activeTabIndex");void 0!==a&&e.tabs("option","active",a)}),r("#csv_file_button").click(function(e){e.preventDefault(),a||(a=wp.media.frames.file_frame=wp.media({title:dealer_map_admin_vars.upl_title,button:{text:dealer_map_admin_vars.upl_text},multiple:!1})).on("select",function(){var e=a.state().get("selection").first().toJSON();r("#csv_file").val(e.url)}),a.open()}),r(".remove_image_button").click(function(){if(1==confirm(dealer_map_admin_vars.upl_sure))r("#csv_file").val("");return!1}),r("#dealer_map-wrap").on("click","button.notice-dismiss",function(){r(this).closest("div.notice").remove()}),r(".error_message, .success_message, .info_message_dismiss").click(function(){r(this).fadeOut("slow",function(){})}),r("#dialog-confirm").dialog({autoOpen:!1,width:400,modal:!0,resizable:!1,buttons:{"Delete Table":function(){r("#delete_db_button_hidden").val("true"),r(this).dialog("close"),r("#dealer_map_form").submit()},Cancel:function(){r(this).dialog("close")}}}),r("#delete_db_button").click(function(e){r("#dialog-confirm").dialog("open")}),r("#show_all").on("click",function(){window.open("admin.php?page=dealer_map/dealer_map_locations","_self")});var e=location.href.split("?")[1];""!==dealer_map_admin_vars.api_keys?"page=dealer_map%2Flocations_form"!==e&&-1==e.indexOf("locations_form&id=")||r(".dealer_map-latlng").on("click",function(e){e.preventDefault(),t()}):r(".dealer_map-latlng.button").css("display","none")});