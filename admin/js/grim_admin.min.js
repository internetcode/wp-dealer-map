jQuery(document).ready(function(r){var t;function i(){r("#grim-map").addClass("bigi"),function(e,i){var t=r("#address").val(),a=r("#city").val(),n=r("#state").val(),o=r("#zip").val(),l=t+", "+a+", "+n+", "+o;{if(!(20<=l.length))return;e.geocode({address:l},function(e,t){if("OK"===t){i.setCenter(e[0].geometry.location),function(e,t){var i=e.formatted_address.split(","),a=t.replace(/, /g," ").trim(),n=i.slice(0,i.length-1).toString().replace(/, /g," ").trim(),o=a.replace(n," ");""===r("#name").val()&&r("#name").val(o);r("#latitude").val(e.geometry.location.lat().toFixed(6)),r("#longitude").val(e.geometry.location.lng().toFixed(6)),r("#active").val("1"),4===i.length?(r("#address").val(i[0].trim()),r("#city").val(i[1].trim()),r("#state").val(i[2].trim().split(" ",1)),r("#zip").val(i[2].trim().slice(3,8)),r("#country").val(i[3].trim())):function(e){var t=e.address_components;6<t.length?(r("#address").val(t[0].long_name+" "+t[1].long_name+" "+t[2].long_name),r("#city").val(t[3].long_name),r("#state").val(t[4].long_name),r("#zip").val(t[6].long_name),r("#country").val(t[5].short_name)):(r("#address").val(t[0].long_name+" "+t[1].long_name),r("#city").val(t[2].long_name),"US"===t[4].short_name?r("#state").val(t[3].short_name):r("#state").val(t[3].long_name),r("#zip").val(t[5].long_name),r("#country").val(t[4].short_name))}(e)}(e[0],l);new google.maps.Marker({map:i,position:e[0].geometry.location})}else alert(grim_admin_vars.geo_alert+": "+t)})}}(new google.maps.Geocoder,new google.maps.Map(document.getElementById("grim-map"),{zoom:8,center:{lat:32.480285,lng:-95.703372}}))}r(function(){var e=r("#general").tabs({activate:function(e,t){var i=r("#general").tabs("option","active");r.cookie("activeTabIndex",i)}}),t=r.cookie("activeTabIndex");void 0!==t&&e.tabs("option","active",t)}),r("#csv_file_button").click(function(e){e.preventDefault(),t||(t=wp.media.frames.file_frame=wp.media({title:grim_admin_vars.upl_title,button:{text:grim_admin_vars.upl_text},multiple:!1})).on("select",function(){var e=t.state().get("selection").first().toJSON();r("#csv_file").val(e.url)}),t.open()}),r(".remove_image_button").click(function(){if(1==confirm(grim_admin_vars.upl_sure))r("#csv_file").val("");return!1}),r("#grim-wrap").on("click","button.notice-dismiss",function(){r(this).closest("div.notice").remove()}),r(".error_message, .success_message, .info_message_dismiss").click(function(){r(this).fadeOut("slow",function(){})}),r("#grim-search-autocomplete, #grim-force-postalcode").change(function(){var e=r("#grim-force-postalcode").parent("p").find(".grim-info-zip-only");r("#grim-search-autocomplete").is(":checked")&&r("#grim-force-postalcode").is(":checked")?e.show():e.hide()}),r("#grim-delay-loading").change(function(){r(this).is(":checked")?r(this).parent("p").find(".grim-info").trigger("mouseover"):r(this).parent("p").find(".grim-info").trigger("mouseout")}),r("#grim-wrap").on("click",function(e){r(".grim-info-text").hide()}),r("#dialog-confirm").dialog({autoOpen:!1,width:400,modal:!0,resizable:!1,buttons:{"Delete Table":function(){r("#delete_db_button_hidden").val("true"),r(this).dialog("close"),r("#grim_form").submit()},Cancel:function(){r(this).dialog("close")}}}),r("#delete_db_button").click(function(e){r("#dialog-confirm").dialog("open")}),r("#show_all").on("click",function(){window.open("admin.php?page=grimdealers/grim_locations","_self")});var e=location.href.split("?")[1];if(""===grim_admin_vars.api_keys)return!1;"page=grimdealers%2Flocations_form"!==e&&-1==e.indexOf("locations_form&id=")||r(".grim-latlng").on("click",function(e){e.preventDefault(),i()})});